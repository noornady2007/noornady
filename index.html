<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SHAHDâ™¡NOOR</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<style>
/* === Ù†ÙØ³ Ø§Ù„Ø³ØªØ§ÙŠÙ„ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ ØªØºÙŠÙŠØ± === */
:root{
  --bg1:#4b1d6f; --bg2:#9b5de5; --card:rgba(255,255,255,.18);
  --text:#fff; --btn:#e0aaff; --btnText:#3c096c;
}
body.dark{
  --bg1:#120016; --bg2:#2b0038; --card:rgba(255,255,255,.12);
  --text:#f5eaff; --btn:#ffb3ff; --btnText:#2b0038;
}
body{
  margin:0;font-family:'Cairo',sans-serif;color:var(--text);
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
}
.hidden{display:none}
.container{max-width:430px;margin:auto;padding:16px}
input,textarea,button{width:100%;padding:12px;margin:8px 0;border-radius:12px;border:none}
button{background:var(--btn);color:var(--btnText);font-weight:700}
.card{background:var(--card);border-radius:16px;padding:12px;margin-top:14px}
.card img{width:100%;border-radius:12px}
.viewer{position:fixed;inset:0;background:#000a;display:flex;align-items:center;justify-content:center}
.viewer img{max-width:90%;max-height:90%;border-radius:16px}
</style>
</head>

<body>

<div id="login" class="container">
  <h1>ğŸ” SHAHDâ™¡NOOR</h1>
  <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<div id="app" class="container hidden">
  <input type="file" id="image" accept="image/*">
  <input type="date" id="date">
  <textarea id="desc" placeholder="ÙˆØµÙ Ø§Ù„ØµÙˆØ±Ø©"></textarea>
  <button onclick="addPhoto()">ğŸ¥°</button>
  <div id="gallery"></div>
</div>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {
  getFirestore, collection, addDoc, getDocs, deleteDoc, doc, query, orderBy
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBuSYBywG6Jn-pTaqkKEDcbYeORukEh1pU",
  authDomain: "noor-25be7.firebaseapp.com",
  projectId: "noor-25be7",
  storageBucket: "noor-25be7.firebasestorage.app",
  messagingSenderId: "245021407626",
  appId: "1:245021407626:web:e4ce8a4d4a5a160831b073"
};

const appFirebase = initializeApp(firebaseConfig);
const db = getFirestore(appFirebase);

const REAL_PASSWORD="25102007";
const loginDiv=document.getElementById("login");
const app=document.getElementById("app");
const gallery=document.getElementById("gallery");

window.login=()=>{
  if(password.value===REAL_PASSWORD){
    loginDiv.classList.add("hidden");
    app.classList.remove("hidden");
    loadPhotos();
  } else alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙ„Ø·");
}

window.addPhoto=()=>{
  const file=image.files[0];
  if(!file) return;
  const r=new FileReader();
  r.onload=async()=>{
    await addDoc(collection(db,"images"),{
      img:r.result,
      date:date.value,
      desc:desc.value,
      createdAt:Date.now()
    });
    image.value="";date.value="";desc.value="";
    loadPhotos();
  };
  r.readAsDataURL(file);
}

async function loadPhotos(){
  gallery.innerHTML="";
  const q=query(collection(db,"images"),orderBy("createdAt","desc"));
  const snap=await getDocs(q);
  snap.forEach(d=>{
    const p=d.data();
    gallery.innerHTML+=`
      <div class="card">
        <img src="${p.img}" onclick="openImg('${p.img}')">
        <div>ğŸ“… ${p.date||""}</div>
        <div>${p.desc||""}</div>
      </div>`;
  });
}

window.openImg=(src)=>{
  const v=document.createElement("div");
  v.className="viewer";
  v.innerHTML=`<img src="${src}">`;
  v.onclick=()=>v.remove();
  document.body.appendChild(v);
}
</script>

</body>
</html>
